<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ‘ã‚¿ãƒ¼ãƒ³æŠ½å‡ºãƒ—ãƒ­ã‚°ãƒ©ãƒ </title>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        h1 { text-align: center; }
        label, input, textarea, button { display: block; margin-bottom: 10px; }
        input[type="text"], textarea { width: 100%; padding: 8px; box-sizing: border-box; border: 1px solid #ccc; border-radius: 4px; }
        textarea { height: 150px; }
        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
        button:hover { background-color: #0056b3; }
        
        /* ğŸ’¡ çµæœè¡¨ç¤ºç”¨textareaã®ã‚¹ã‚¿ã‚¤ãƒ« */
        textarea#results { 
            height: 200px; /* é«˜ã•ã‚’èª¿æ•´ */
            margin-top: 20px; 
            padding: 15px; 
            border: 1px solid #007bff; /* æ ç·šã‚’å¼·èª¿ */
            background-color: #eaf3ff; /* èƒŒæ™¯è‰²ã‚’å¤‰æ›´ */
            resize: vertical; /* ç¸¦æ–¹å‘ã®ã¿ãƒªã‚µã‚¤ã‚ºå¯èƒ½ã« */
            color: #333;
        }
        
        .input-group { margin-bottom: 20px; padding: 10px; border: 1px solid #eee; border-radius: 5px; }
    </style>
</head>
<body>

    <h1>ğŸ“ ãƒ‘ã‚¿ãƒ¼ãƒ³ã«åŸºã¥ããƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º</h1>

    <div class="input-group">
        <label for="consonants">**å­éŸ³ (C)** (ã‚¹ãƒšãƒ¼ã‚¹ã‚„ã‚³ãƒ³ãƒåŒºåˆ‡ã‚Šã§ãªãã€**æ–‡å­—ã‚’é€£ç¶š**ã•ã›ã¦å…¥åŠ›):</label>
        <input type="text" id="consonants" value="kstnhmyrwgzdbp" placeholder="ä¾‹: kstnhmyrwgzdbp">
    </div>

    <div class="input-group">
        <label for="vowels">**æ¯éŸ³ (V)** (ã‚¹ãƒšãƒ¼ã‚¹ã‚„ã‚³ãƒ³ãƒåŒºåˆ‡ã‚Šã§ãªãã€**æ–‡å­—ã‚’é€£ç¶š**ã•ã›ã¦å…¥åŠ›):</label>
        <input type="text" id="vowels" value="aeiou" placeholder="ä¾‹: aeiou">
    </div>

    <div class="input-group">
        <label for="pattern">**æŠ½å‡ºãƒ‘ã‚¿ãƒ¼ãƒ³** (CVCVã®ã‚ˆã†ã«ã€**Cã¨V**ã§æŒ‡å®š):</label>
        <input type="text" id="pattern" value="CVCVCV" placeholder="ä¾‹: CVCV, CVCVCV">
    </div>

    <div class="input-group">
        <label for="inputText">**æŠ½å‡ºã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆ** (æ”¹è¡ŒåŒºåˆ‡ã‚Š):</label>
        <textarea id="inputText" placeholder="ä¸€è¡Œã«ä¸€å˜èª/ãƒ•ãƒ¬ãƒ¼ã‚ºã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚">kakiku
sasisu
tatitu
atteta
sageta
ageta.
aetaga</textarea>
    </div>

    <button onclick="extractText()">æŠ½å‡ºå®Ÿè¡Œ</button>

    <hr>

    <h2>âœ… æŠ½å‡ºçµæœ</h2>
    <textarea id="results" readonly placeholder="çµæœãŒè¡¨ç¤ºã•ã‚Œã¾ã™"></textarea>

    <script>
        function extractText() {
            // 1. å…¥åŠ›å€¤ã®å–å¾—
            const consonants = document.getElementById('consonants').value.toLowerCase().replace(/[^a-z]/g, ''); // ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆä»¥å¤–ã‚’é™¤å»
            const vowels = document.getElementById('vowels').value.toLowerCase().replace(/[^a-z]/g, ''); // ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆä»¥å¤–ã‚’é™¤å»
            const patternInput = document.getElementById('pattern').value.toUpperCase().trim();
            const inputText = document.getElementById('inputText').value;
            const resultsTextarea = document.getElementById('results'); // resultsDivã‚’resultsTextareaã«å¤‰æ›´

            if (!consonants || !vowels || !patternInput) {
                resultsTextarea.value = 'å­éŸ³ã€æ¯éŸ³ã€æŠ½å‡ºãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚'; // .valueã‚’ä½¿ç”¨
                return;
            }

            // 2. ãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰æ­£è¦è¡¨ç¾æ–‡å­—åˆ—ã‚’æ§‹ç¯‰
            let regexString = '^'; // è¡Œã®å…ˆé ­ã‹ã‚‰ãƒãƒƒãƒã‚’é–‹å§‹
            
            for (const char of patternInput) {
                if (char === 'C') {
                    // C (å­éŸ³) ã®ãƒ‘ã‚¿ãƒ¼ãƒ³: [k s t n h m y r w g z d b p] ã®ã„ãšã‚Œã‹
                    // æ­£è¦è¡¨ç¾ã§ã¯ã€é›†åˆã¯ [ ] ã§è¡¨ã™
                    regexString += `[${consonants}]`;
                } else if (char === 'V') {
                    // V (æ¯éŸ³) ã®ãƒ‘ã‚¿ãƒ¼ãƒ³: [a i u e o] ã®ã„ãšã‚Œã‹
                    regexString += `[${vowels}]`;
                } else {
                    // C, V ä»¥å¤–ã®æ–‡å­—ãŒã‚ã£ãŸå ´åˆã¯ã‚¨ãƒ©ãƒ¼
                    resultsTextarea.value = `ã‚¨ãƒ©ãƒ¼: æŠ½å‡ºãƒ‘ã‚¿ãƒ¼ãƒ³ã«ç„¡åŠ¹ãªæ–‡å­— ('${char}') ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚Cã¾ãŸã¯Vã®ã¿ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚`; // .valueã‚’ä½¿ç”¨
                    return;
                }
            }

            // æ§‹ç¯‰ã—ãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç›´å¾Œã«ä½•ã‹æ–‡å­—ãŒã‚ã£ã¦ã‚‚ãƒãƒƒãƒã—ãªã„ã‚ˆã†ã«ã™ã‚‹
            // $ ã¯è¡Œã®æœ«å°¾ã‚’æ„å‘³ã™ã‚‹
            regexString += '$'; 

            // 3. æ­£è¦è¡¨ç¾ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ
            // i ãƒ•ãƒ©ã‚°ã¯å¤§æ–‡å­—ãƒ»å°æ–‡å­—ã‚’åŒºåˆ¥ã—ãªã„ãƒãƒƒãƒãƒ³ã‚°ã‚’è¡Œã†
            let patternRegex;
            try {
                 patternRegex = new RegExp(regexString, 'i');
            } catch (e) {
                 resultsTextarea.value = `æ­£è¦è¡¨ç¾ã®æ§‹ç¯‰ã«å¤±æ•—ã—ã¾ã—ãŸ: ${e.message}`; // .valueã‚’ä½¿ç”¨
                 return;
            }


            // 4. ãƒ†ã‚­ã‚¹ãƒˆã‚’è¡Œã”ã¨ã«å‡¦ç†ã—ã€ãƒãƒƒãƒã™ã‚‹è¡Œã‚’æŠ½å‡º
            const lines = inputText.split('\n');
            const matchedLines = [];

            for (const line of lines) {
                // è¡Œé ­/è¡Œæœ«ã®ã‚¹ãƒšãƒ¼ã‚¹ãªã©ã‚’é™¤å»ã—ã€ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆä»¥å¤–ã®æ–‡å­—ã‚’é™¤å»ã—ã¦ã‹ã‚‰ãƒã‚§ãƒƒã‚¯
                const cleanedLine = line.trim().replace(/[^a-zA-Z]/g, '');
                
                if (cleanedLine && patternRegex.test(cleanedLine)) {
                    // å…ƒã®è¡Œã‚’çµæœã¨ã—ã¦ä¿å­˜
                    matchedLines.push(line.trim()); 
                }
            }

            // 5. çµæœã®è¡¨ç¤º
            if (matchedLines.length > 0) {
                resultsTextarea.value = matchedLines.join('\n'); // .valueã‚’ä½¿ç”¨
            } else {
                resultsTextarea.value = 'ä¸€è‡´ã™ã‚‹è¡Œã¯è¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚'; // .valueã‚’ä½¿ç”¨
            }
        }
    </script>

</body>
</html>
